{% load static %}
{% load mytxsTags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href={% static 'mytxs/styles.css' %}>
    <title>{% block title %}MyTXS 2.0{% endblock %}</title>
    
    <script src="{% static 'mytxs/formSafety.js' %}" defer></script>
    {% if request.lazyDropdownData %}<script src="{% static 'mytxs/lazyDropdown.js' %}" defer data-json="{{ request.lazyDropdownData }}"></script>{% endif %}
    <script src="{% static 'mytxs/searchDropdown.js' %}" defer></script>
    <script src="{% static 'mytxs/imageHover.js' %}" defer></script>
    {% block jsHead %} {% endblock %}
</head>

<body class="bg-customPurple h-screen">
    {% block messages %}
    {% if messages %}
    <div class="fixed inset-x-0 top-4 text-center z-10" onclick="this.classList.add('hidden');">
        {% for message in messages %}
        <span class="{% if 'error' in message.tags %}bg-red-400{% else %}bg-green-400{% endif %} rounded-md p-2">
            {{message.tags|capfirst}}: {{ message }}
        </span> <br>
        {% endfor %}
    </div>
    {% endif %}
    {% endblock %}

    {% block body %}

    <div class="flex flex-row [&>*]:flex-none space-x-6 m-4">
        <div class="bg-gray-800 border border-yellow-300 w-24 text-white text-xs 
            text-center flex flex-col [&>*]:py-2 [&>*>*]:mx-auto [&>*>p]:font-bold">
            {% block sidebar %}

            {% if user.medlem %}
            <a href="{{user.medlem.get_absolute_url}}">
                <img src="{% static 'mytxs/bok.png' %}">
                <p>Medlems-registerdata</p>
            </a>
            {% endif %}

            <a href="{% url 'endrePassord' %}">
                <img src="{% static 'mytxs/lock.png' %}" border="0">
                <p>Endre passord</p>
            </a>

            <a href="{% url 'sjekkheftet' user.medlem.navBar.sjekkheftet|firstKey %}">
                <img src="{% static 'mytxs/sjekkheftet.png' %}" border="0">
                <p>Sjekkheftet</p>
            </a>

            {% if user.medlem.navBar.semesterplan %}
            <a href="{% url 'semesterplan' user.medlem.navBar.semesterplan|firstKey %}">
                <svg class="w-1/2 fill-gray-400" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 29.237 29.237" xml:space="preserve">
                    <g>
                        <g>
                            <path d="M7.685,24.819H8.28v-2.131h3.688v2.131h0.596v-2.131h3.862v2.131h0.597v-2.131h4.109v2.131h0.595    v-2.131h3.417v-0.594h-3.417v-3.861h3.417v-0.596h-3.417v-3.519h3.417v-0.594h-3.417v-2.377h-0.595v2.377h-4.109v-2.377h-0.597    v2.377h-3.862v-2.377h-0.596v2.377H8.279v-2.377H7.685v2.377H3.747v0.594h3.938v3.519H3.747v0.596h3.938v3.861H3.747v0.594h3.938    V24.819z M12.563,22.094v-3.861h3.862v3.861H12.563z M21.132,22.094h-4.109v-3.861h4.109V22.094z M21.132,14.118v3.519h-4.109    v-3.519C17.023,14.119,21.132,14.119,21.132,14.118z M16.426,14.118v3.519h-3.862v-3.519    C12.564,14.119,16.426,14.119,16.426,14.118z M8.279,14.118h3.688v3.519H8.279V14.118z M8.279,18.233h3.688v3.861H8.279V18.233z"/>
                            <path d="M29.207,2.504l-4.129,0.004L24.475,2.51v2.448c0,0.653-0.534,1.187-1.188,1.187h-1.388    c-0.656,0-1.188-0.533-1.188-1.187V2.514l-1.583,0.002v2.442c0,0.653-0.535,1.187-1.191,1.187h-1.388    c-0.655,0-1.188-0.533-1.188-1.187V2.517l-1.682,0.004v2.438c0,0.653-0.534,1.187-1.189,1.187h-1.389    c-0.653,0-1.188-0.533-1.188-1.187V2.525H8.181v2.434c0,0.653-0.533,1.187-1.188,1.187H5.605c-0.656,0-1.189-0.533-1.189-1.187    V2.53L0,2.534v26.153h2.09h25.06l2.087-0.006L29.207,2.504z M27.15,26.606H2.09V9.897h25.06V26.606z"/>
                            <path d="M5.605,5.303h1.388c0.163,0,0.296-0.133,0.296-0.297v-4.16c0-0.165-0.133-0.297-0.296-0.297H5.605    c-0.165,0-0.298,0.132-0.298,0.297v4.16C5.307,5.17,5.44,5.303,5.605,5.303z"/>
                            <path d="M11.101,5.303h1.389c0.164,0,0.297-0.133,0.297-0.297v-4.16c-0.001-0.165-0.134-0.297-0.298-0.297    H11.1c-0.163,0-0.296,0.132-0.296,0.297v4.16C10.805,5.17,10.938,5.303,11.101,5.303z"/>
                            <path d="M16.549,5.303h1.388c0.166,0,0.299-0.133,0.299-0.297v-4.16c-0.001-0.165-0.133-0.297-0.299-0.297    h-1.388c-0.164,0-0.297,0.132-0.297,0.297v4.16C16.252,5.17,16.385,5.303,16.549,5.303z"/>
                            <path d="M21.899,5.303h1.388c0.164,0,0.296-0.133,0.296-0.297v-4.16c0-0.165-0.132-0.297-0.296-0.297    h-1.388c-0.164,0-0.297,0.132-0.297,0.297v4.16C21.603,5.17,21.735,5.303,21.899,5.303z"/>
                        </g>
                    </g>
                </svg>
                <p>Semesterplan</p>
            </a>
            {% endif %}

            {% if user.medlem.aktiveKor %}
            <a href="{% url 'lenker' %}">
                <svg class="w-2/3 stroke-gray-400 fill-transparent" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g id="Interface / Link">
                        <path id="Vector" d="M9.1718 14.8288L14.8287 9.17192M7.05086 11.293L5.63664 12.7072C4.07455 14.2693 4.07409 16.8022 5.63619 18.3643C7.19829 19.9264 9.7317 19.9259 11.2938 18.3638L12.7065 16.9498M11.2929 7.05L12.7071 5.63579C14.2692 4.07369 16.8016 4.07397 18.3637 5.63607C19.9258 7.19816 19.9257 9.73085 18.3636 11.2929L16.9501 12.7071" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </g>
                </svg>
                <p>Lenker</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.hendelseListe %}
            <a href="{% url 'hendelseListe' %}?start={% now 'Y-m-d' %}">
                <img src="{% static 'mytxs/arkiv.png' %}" border="0">
                <p>Hendelser</p>
            </a>
            {% endif %}
            
            {% if user.medlem.navBar.medlemListe %}
            <a href="{% url 'medlemListe' %}">
                <img src="{% static 'mytxs/arkiv.png' %}" border="0">
                <p>Medlemmer</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.fraværListe %}
            <a href="{% url 'fraværListe' user.medlem.navBar.fraværListe|firstKey %}">
                <img src="{% static 'mytxs/arkiv.png' %}" border="0">
                <p>Fravær</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.dekorasjonListe %}
            <a href="{% url 'dekorasjonListe' %}">
                <svg class="w-2/3 fill-gray-400" version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64" xml:space="preserve">
                    <g>
                        <path d="M54,22C54,9.869,44.131,0,32,0S10,9.869,10,22c0,6.816,3.117,12.92,8,16.958V62   c0,0.758,0.428,1.45,1.105,1.789C19.388,63.931,19.694,64,19.998,64c0.426,0,0.848-0.136,1.202-0.4L32,55.5l10.8,8.1   c0.354,0.265,0.775,0.4,1.2,0.4c0.305,0,0.611-0.069,0.895-0.211C45.572,63.45,46,62.758,46,62V38.958   C50.883,34.92,54,28.816,54,22z M20,62V40.425c0.645,0.421,1.312,0.809,2,1.161V60.5L20,62z M32,53l-8,6V42.487   C26.481,43.46,29.178,44,32,44s5.519-0.54,8-1.513V59L32,53z M44,62l-2-1.5V41.586c0.688-0.353,1.355-0.74,2-1.161V62z M32,42   c-11.028,0-20-8.972-20-20S20.972,2,32,2s20,8.972,20,20S43.028,42,32,42z"/>
                        <path d="M32,4c-9.925,0-18,8.075-18,18s8.075,18,18,18s18-8.075,18-18S41.925,4,32,4z M32,38   c-8.822,0-16-7.178-16-16S23.178,6,32,6s16,7.178,16,16S40.822,38,32,38z"/>
                        <path d="M39.147,19.361l-4.309-0.658l-1.936-4.123c-0.165-0.352-0.518-0.575-0.905-0.575s-0.74,0.224-0.905,0.575   l-1.936,4.123l-4.309,0.658c-0.37,0.057-0.678,0.315-0.797,0.671s-0.029,0.747,0.232,1.016l3.146,3.227l-0.745,4.564   c-0.062,0.378,0.099,0.758,0.411,0.979s0.725,0.243,1.061,0.058l3.841-2.124l3.841,2.124C35.99,29.959,36.157,30,36.323,30   c0.202,0,0.404-0.062,0.576-0.183c0.312-0.221,0.473-0.601,0.411-0.979l-0.745-4.564l3.146-3.227   c0.262-0.269,0.352-0.66,0.232-1.016S39.518,19.418,39.147,19.361z M34.781,23.239c-0.222,0.228-0.322,0.546-0.271,0.859   l0.495,3.029l-2.522-1.395c-0.151-0.083-0.317-0.125-0.484-0.125s-0.333,0.042-0.484,0.125l-2.522,1.395l0.495-3.029   c0.051-0.313-0.05-0.632-0.271-0.859l-2.141-2.194l2.913-0.445c0.329-0.05,0.612-0.261,0.754-0.563l1.257-2.678l1.257,2.678   c0.142,0.303,0.425,0.514,0.754,0.563l2.913,0.445L34.781,23.239z"/>
                    </g>
                </svg>
                <p>Dekorasjoner</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.vervListe %}
            <a href="{% url 'vervListe' %}">
                <svg class="w-2/3 fill-transparent stroke-gray-400" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 16V5L8 9L12 5L16 9L20 5V16H4Z"/>
                    <path d="M4 19H20M4 5V16H20V5L16 9L12 5L8 9L4 5Z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p>Verv</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.tilgangListe %}
            <a href="{% url 'tilgangListe' %}">
                <svg class="w-2/3 fill-transparent stroke-gray-400 stroke-1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 9L9.59309 9C9.59309 9 8.5 7 6 7C3.5 7 2 8.79086 2 11C2 13.2091 3.5 15 6 15C8.5 15 9.59309 13 9.59309 13L15 13L15 17L19 17L19 13L21 13L21 9Z" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 12.5C5.17157 12.5 4.5 11.8284 4.5 11C4.5 10.1716 5.17157 9.5 6 9.5C6.82843 9.5 7.5 10.1716 7.5 11C7.5 11.8284 6.82843 12.5 6 12.5Z"/>
                </svg>
                <p>Tilganger</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.turneListe %}
            <a href="{% url 'turneListe' %}">
                <svg class="w-2/3 fill-gray-400" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 350 350" xml:space="preserve">
                    <path id="XMLID_494_" d="M299.361,327.067c-0.445-0.715-23.208-37.612-45.34-88.403c7.156-1.138,12.631-7.318,12.631-14.795  c0-8.284-6.716-15-15-15h-9.827c-6.826-17.865-13.129-36.748-18.146-55.896c6.326-1.762,10.974-7.551,10.974-14.438  c0-8.284-6.716-15-15-15h-2.548c-2.078-11.43-3.556-22.814-4.275-34h6.823c8.284,0,15-6.716,15-15c0-8.284-6.716-15-15-15h-29.651  V15c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v44.535h-29.651c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15h6.823  c-0.72,11.186-2.198,22.57-4.275,34h-2.548c-8.284,0-15,6.716-15,15c0,6.887,4.648,12.676,10.974,14.438  c-5.018,19.148-11.321,38.031-18.146,55.896h-9.827c-8.284,0-15,6.716-15,15c0,7.477,5.476,13.657,12.632,14.795  c-22.132,50.791-44.894,87.688-45.338,88.4c-2.883,4.624-3.031,10.449-0.387,15.215c2.645,4.765,7.666,7.721,13.116,7.721h74.42  c8.284,0,15-6.716,15-15c0-12.246,9.963-22.209,22.209-22.209c12.246,0,22.209,9.963,22.209,22.209c0,8.284,6.716,15,15,15h74.42  c5.449,0,10.468-2.956,13.113-7.72C302.387,337.518,302.241,331.692,299.361,327.067z M167.237,89.535h15.527  c0.62,10.917,1.907,22.258,3.85,34h-23.227C165.33,111.793,166.617,100.452,167.237,89.535z M157.208,153.535h35.586  c4.317,17.662,9.967,36.122,16.935,55.334h-69.457C147.24,189.657,152.89,171.197,157.208,153.535z M225.014,320  c-6.46-21.501-26.436-37.209-50.013-37.209c-23.577,0-43.553,15.708-50.013,37.209H89.389c8.633-15.625,20.453-38.31,32.351-65.204  c2.372-5.361,4.642-10.666,6.832-15.927h92.857c2.19,5.261,4.46,10.566,6.832,15.927c11.898,26.895,23.718,49.579,32.351,65.204  H225.014z"/>
                </svg>
                <p>Turneer</p>
            </a>
            {% endif %}

            {% if user.medlem.navBar.loggListe %}
            <a href="{% url 'loggListe' %}">
                <svg class="w-4/5 fill-gray-400" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511 511" xml:space="preserve">
                    <g>
                        <path d="M447.5,160h-160c-0.301,0-0.596,0.022-0.888,0.057l-22.27-40.085c-2.732-4.917-7.924-7.972-13.549-7.972h-26.355   c-4.403,0-8.613,1.882-11.549,5.163s-4.342,7.672-3.856,12.049L212.454,160H63.5C27.893,160,0,212.491,0,279.5S27.893,399,63.5,399   h384c35.607,0,63.5-52.491,63.5-119.5S483.107,160,447.5,160z M30.61,355.342C20.544,335.209,15,308.274,15,279.5   s5.544-55.709,15.61-75.842C39.717,185.445,51.705,175,63.5,175s23.783,10.445,32.89,28.658C106.456,223.791,112,250.726,112,279.5   s-5.544,55.709-15.61,75.842C87.283,373.555,75.295,384,63.5,384S39.717,373.555,30.61,355.342z M447.5,384H94.757   C114.147,363.769,127,324.982,127,279.5S114.147,195.231,94.757,175H214.12l1.925,17.328c0.458,4.117,4.161,7.084,8.282,6.626   c4.117-0.458,7.083-4.166,6.626-8.282l-7.013-63.116c-0.007-0.061-0.024-0.223,0.125-0.389s0.312-0.167,0.373-0.167h26.355   c0.182,0,0.349,0.099,0.437,0.257l37.714,67.886c1.371,2.467,3.927,3.859,6.563,3.859c1.232,0,2.482-0.304,3.635-0.945   c3.621-2.011,4.926-6.578,2.914-10.199L294.913,175H447.5c11.795,0,23.783,10.445,32.89,28.658   C490.456,223.791,496,250.726,496,279.5s-5.544,55.709-15.61,75.842C471.283,373.555,459.295,384,447.5,384z"/>
                        <path d="M48.313,302.621C47.442,295.221,47,287.442,47,279.5c0-44.395,12.657-64.5,16.5-64.5c4.142,0,7.5-3.358,7.5-7.5   s-3.358-7.5-7.5-7.5c-7.001,0-16.863,4.548-24.086,26.217C34.633,240.56,32,259.483,32,279.5c0,8.526,0.477,16.896,1.417,24.875   c0.449,3.816,3.688,6.624,7.439,6.624c0.292,0,0.589-0.018,0.887-0.053C45.856,310.462,48.798,306.734,48.313,302.621z"/>
                        <path d="M87.586,332.783C92.367,318.439,95,299.517,95,279.5c0-11.649-0.873-22.828-2.596-33.225   c-0.677-4.087-4.542-6.849-8.625-6.174c-4.086,0.677-6.851,4.538-6.174,8.625C79.195,258.316,80,268.67,80,279.5   c0,44.395-12.657,64.5-16.5,64.5c-0.736,0-4.279-1.935-8.17-11.401c-1.575-3.832-5.958-5.66-9.788-4.086   c-3.831,1.574-5.661,5.957-4.086,9.788C48.487,355.409,57.325,359,63.5,359C70.501,359,80.363,354.452,87.586,332.783z"/>
                        <path d="M415.5,232h-23.996c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5H415.5c4.142,0,7.5-3.358,7.5-7.5S419.642,232,415.5,232z   "/>
                        <path d="M215.501,247h144c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5h-144c-4.142,0-7.5,3.358-7.5,7.5S211.359,247,215.501,247z   "/>
                        <path d="M159.5,247h24.002c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5H159.5c-4.142,0-7.5,3.358-7.5,7.5S155.358,247,159.5,247z   "/>
                        <path d="M455.5,272h-23.998c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5H455.5c4.142,0,7.5-3.358,7.5-7.5S459.642,272,455.5,272z   "/>
                        <path d="M399.501,272h-16.004c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h16.004c4.142,0,7.5-3.358,7.5-7.5   S403.644,272,399.501,272z"/>
                        <path d="M167.5,272c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h184.003c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5H167.5z"/>
                        <path d="M383.5,312h-104c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h104c4.142,0,7.5-3.358,7.5-7.5S387.642,312,383.5,312z"/>
                        <path d="M247.5,312h-15.997c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5H247.5c4.142,0,7.5-3.358,7.5-7.5S251.643,312,247.5,312z   "/>
                        <path d="M191.5,312h-40c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h40c4.142,0,7.5-3.358,7.5-7.5S195.642,312,191.5,312z"/>
                    </g>
                </svg>
                <p>Logg</p>
            </a>
            {% endif %}

            <a href="{% url 'logout' %}">
                <svg class="w-3/5 fill-gray-400" viewBox="-2 0 19 19" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.498 17.1a7.128 7.128 0 0 1-.98-.068 7.455 7.455 0 0 1-1.795-.483 7.26 7.26 0 0 1-3.028-2.332A7.188 7.188 0 0 1 .73 12.52a7.304 7.304 0 0 1 .972-7.128 7.221 7.221 0 0 1 1.387-1.385 1.03 1.03 0 0 1 1.247 1.638 5.176 5.176 0 0 0-.993.989 5.313 5.313 0 0 0-.678 1.181 5.23 5.23 0 0 0-.348 1.292 5.22 5.22 0 0 0 .326 2.653 5.139 5.139 0 0 0 .69 1.212 5.205 5.205 0 0 0 .992.996 5.257 5.257 0 0 0 1.178.677 5.37 5.37 0 0 0 1.297.35 5.075 5.075 0 0 0 1.332.008 5.406 5.406 0 0 0 1.32-.343 5.289 5.289 0 0 0 2.211-1.682 5.18 5.18 0 0 0 1.02-2.465 5.2 5.2 0 0 0 .01-1.336 5.315 5.315 0 0 0-.343-1.318 5.195 5.195 0 0 0-.695-1.222 5.134 5.134 0 0 0-.987-.989 1.03 1.03 0 1 1 1.24-1.643 7.186 7.186 0 0 1 1.384 1.386 7.259 7.259 0 0 1 .97 1.706 7.413 7.413 0 0 1 .473 1.827 7.296 7.296 0 0 1-4.522 7.65 7.476 7.476 0 0 1-1.825.471 7.203 7.203 0 0 1-.89.056zM7.5 9.613a1.03 1.03 0 0 1-1.03-1.029V2.522a1.03 1.03 0 0 1 2.06 0v6.062a1.03 1.03 0 0 1-1.03 1.03z"/>
                </svg>
                <p>Logg ut</p>
            </a>

            {% endblock %}
        </div>
        
        <div class="flex flex-col space-y-4">
            <div id="topbar" class="bg-white border-black border-2 px-2">
                {% block topbar %}
                <div class="flex justify-between">
                    <b>Hei {{ user.medlem.navn }}!</b>
                    <span class="ml-10">Siste login: {{user.last_login|date:"G:i d.m.Y"}}</span>
                </div>
                {% endblock %}
            </div>

            <div id="content">
                {% block heading %}
                <div class="[&>*]:inline">
                    <h1 class="text-2xl">
                        {% if heading %}
                        {{heading}}
                        {% elif request.instance %}
                        {{request.instance|capfirst}}

                        {% if user.medlem.tilganger %}
                        {% addLoggLink request.instance %}
                        {% endif %}

                        {% endif %}
                    </h1>
                </div>
                {% addSubNavigation %}
                {% endblock %}

                {% block content %} [Default Content] {% endblock %}
            </div>
        </div>
    </div>

    {% endblock %}

    {% if request.optionForm %}
    <div class="fixed right-6 bottom-6 p-2 rounded-md bg-customPurple border-2 border-red-700 group">
        <div class="block group-hover:hidden">Innstillinger</div>
        <form class="hidden group-hover:block" action="{{ request.get_full_path }}" method="post" onChange="this.submit()">
            {% csrf_token %}
            {{ request.optionForm.as_p }}
        </form>
    </div>
    {% endif %}
</body>
</html>